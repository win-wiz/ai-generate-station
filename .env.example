# 🔧 真实数据库架构环境变量配置示例
# 复制此文件为 .env.local 并填入实际值

# ===========================================
# 🎯 核心数据库配置
# ===========================================

# 数据库类型 (cloudflare-d1 | libsql | postgresql)
DATABASE_TYPE=cloudflare-d1

# 强制使用真实数据库（禁用 Mock 数据库）
USE_REAL_DATABASE_ONLY=true

# ===========================================
# 🏭 生产环境数据库配置
# ===========================================

# 生产数据库连接
PROD_DATABASE_URL=d1://your-production-database-url
PROD_DATABASE_TOKEN=your-production-database-token
PROD_ENCRYPTION_KEY=your-production-encryption-key
PROD_MAX_CONNECTIONS=10
PROD_CONNECTION_TIMEOUT=30000
PROD_QUERY_TIMEOUT=60000

# ===========================================
# 🧪 开发环境数据库配置（隔离副本）
# ===========================================

# 开发数据库连接（生产数据的隔离副本）
DEV_DATABASE_URL=d1://your-development-database-url
DEV_DATABASE_TOKEN=your-development-database-token
DEV_ENCRYPTION_KEY=your-development-encryption-key
DEV_READ_ONLY=false
DEV_MAX_CONNECTIONS=5
DEV_CONNECTION_TIMEOUT=15000
DEV_QUERY_TIMEOUT=30000
DEV_AUDIT_ENABLED=true

# ===========================================
# 🎭 测试环境数据库配置
# ===========================================

# 测试数据库连接（匿名化数据）
TEST_DATABASE_URL=d1://your-test-database-url
TEST_DATABASE_TOKEN=your-test-database-token
TEST_MAX_CONNECTIONS=3
TEST_CONNECTION_TIMEOUT=10000
TEST_QUERY_TIMEOUT=20000

# ===========================================
# 🔒 安全和访问控制配置
# ===========================================

# 数据库加密
DB_ENCRYPTION_ENABLED=true

# 审计日志
AUDIT_RETENTION_DAYS=90
AUDIT_ENCRYPTION_KEY=your-audit-encryption-key

# 访问控制
ACCESS_CONTROL_ENABLED=true
REQUIRE_PROD_APPROVAL=true
STRICT_PRODUCTION_MODE=true

# 数据匿名化
DATA_ANONYMIZATION=true
ANONYMIZE_ON_SYNC=true

# 生产环境权限
ALLOW_PROD_READ=false
EMERGENCY_MOCK_ALLOWED=false

# ===========================================
# 🔄 数据同步配置
# ===========================================

# 自动数据同步
DB_SYNC_ENABLED=true
DB_SYNC_SCHEDULE="0 2 * * *"  # 每天凌晨2点
DB_SYNC_DIRECTION=production-to-dev

# ===========================================
# 📊 监控和告警配置
# ===========================================

# 健康检查
HEALTH_CHECK_INTERVAL=30000

# 性能监控
PERFORMANCE_METRICS=true

# 告警系统
ALERTING_ENABLED=true

# ===========================================
# 🌐 Cloudflare 特定配置
# ===========================================

# Cloudflare D1 数据库 ID
CLOUDFLARE_D1_PROD_ID=your-production-d1-id
CLOUDFLARE_D1_DEV_ID=your-development-d1-id
CLOUDFLARE_D1_TEST_ID=your-test-d1-id

# Cloudflare API 令牌
CLOUDFLARE_API_TOKEN=your-cloudflare-api-token
CLOUDFLARE_ACCOUNT_ID=your-cloudflare-account-id

# ===========================================
# 🔧 开发工具配置
# ===========================================

# 跳过环境变量验证（仅构建时）
SKIP_ENV_VALIDATION=false

# 调试模式
DEBUG_DATABASE=false
VERBOSE_LOGGING=false